import{u,w as f,j as e,H as _,t as j,b$ as y,I as t}from"./index-DQ7iaOIo.js";import{b,e as C}from"./chunk-RYVWLLZ2-CmEHdxLZ.js";import{a as l,u as g}from"./chunk-RLLZZQKN-CuYY48Je.js";import{u as E,F as s}from"./chunk-C7RYT3S3-DvWl1ixb.js";import{t as F}from"./zod-DqtdDTUb.js";import{o as v,s as i}from"./index-yuYasa5Y.js";import{B as h}from"./label-DsyTUQgE.js";import"./prompt-BKfKBHyN.js";var I=v({email:i().email(),first_name:i().optional(),last_name:i().optional(),company_name:i().optional(),phone:i().optional()}),L=({customer:n})=>{const{t:o}=u(),{handleSuccess:m}=g(),a=E({defaultValues:{email:n.email||"",first_name:n.first_name||"",last_name:n.last_name||"",company_name:n.company_name||"",phone:n.phone||""},resolver:F(I)}),{mutateAsync:c,isPending:d}=C(n.id),p=a.handleSubmit(async r=>{await c({email:n.has_account?void 0:r.email,first_name:r.first_name||null,last_name:r.last_name||null,phone:r.phone||null,company_name:r.company_name||null},{onSuccess:({customer:x})=>{j.success(o("customers.edit.successToast",{email:x.email})),m()},onError:x=>{j.error(x.message)}})});return e.jsx(l.Form,{form:a,children:e.jsxs("form",{onSubmit:p,className:"flex flex-1 flex-col",children:[e.jsx(l.Body,{children:e.jsxs("div",{className:"flex flex-col gap-y-4",children:[e.jsx(s.Field,{control:a.control,name:"email",render:({field:r})=>e.jsxs(s.Item,{children:[e.jsx(s.Label,{children:o("fields.email")}),e.jsx(s.Control,{children:e.jsx(y,{showTooltip:n.has_account,content:o("customers.edit.emailDisabledTooltip"),children:e.jsx(t,{...r,disabled:n.has_account})})}),e.jsx(s.ErrorMessage,{})]})}),e.jsx(s.Field,{control:a.control,name:"first_name",render:({field:r})=>e.jsxs(s.Item,{children:[e.jsx(s.Label,{children:o("fields.firstName")}),e.jsx(s.Control,{children:e.jsx(t,{...r})}),e.jsx(s.ErrorMessage,{})]})}),e.jsx(s.Field,{control:a.control,name:"last_name",render:({field:r})=>e.jsxs(s.Item,{children:[e.jsx(s.Label,{children:o("fields.lastName")}),e.jsx(s.Control,{children:e.jsx(t,{...r})}),e.jsx(s.ErrorMessage,{})]})}),e.jsx(s.Field,{control:a.control,name:"company_name",render:({field:r})=>e.jsxs(s.Item,{children:[e.jsx(s.Label,{children:o("fields.company")}),e.jsx(s.Control,{children:e.jsx(t,{...r})}),e.jsx(s.ErrorMessage,{})]})}),e.jsx(s.Field,{control:a.control,name:"phone",render:({field:r})=>e.jsxs(s.Item,{children:[e.jsx(s.Label,{children:o("fields.phone")}),e.jsx(s.Control,{children:e.jsx(t,{...r})}),e.jsx(s.ErrorMessage,{})]})})]})}),e.jsx(l.Footer,{children:e.jsxs("div",{className:"flex items-center justify-end gap-x-2",children:[e.jsx(l.Close,{asChild:!0,children:e.jsx(h,{variant:"secondary",size:"small",children:o("actions.cancel")})}),e.jsx(h,{isLoading:d,type:"submit",variant:"primary",size:"small",children:o("actions.save")})]})})]})})},z=()=>{const{t:n}=u(),{id:o}=f(),{customer:m,isLoading:a,isError:c,error:d}=b(o);if(c)throw d;return e.jsxs(l,{children:[e.jsx(l.Header,{children:e.jsx(_,{children:n("customers.edit.header")})}),!a&&m&&e.jsx(L,{customer:m})]})};export{z as Component};
