import{u as z}from"./chunk-GFQLC5NX-CVzMW7Ex.js";import{g as N,a as w,b as P}from"./chunk-54IEHX46-DWMq7yL7.js";import{T as c,a as E}from"./chunk-IQRVIEMV-CAyGAynz.js";import{S as g}from"./chunk-ADOCJB6L-DwJI6LYz.js";import{u as D,D as H}from"./chunk-MOFW5DA3-BBRzwwAr.js";import{j as e,O as S,u,k as q,C as A,H as I,T as p,L as h,r as v,g as f,n as R,J as k,A as L}from"./index-DQ7iaOIo.js";import"./lodash-BbEdBw2P.js";import{u as M}from"./chunk-C76H5USB-BzcnRuay.js";import"./chunk-7LAPOKHJ-CJKFdgcT.js";import"./chunk-M566SHKI-CpCecA-q.js";import{u as B}from"./chunk-2FB644HY-BHty38NP.js";import{P as O}from"./pencil-square-C2dQ88SM.js";import{T as Q}from"./trash-AHlgA58B.js";import{B as j}from"./label-DsyTUQgE.js";import{c as y}from"./index-DW7vLJga.js";import"./use-prompt-DSUtE_64.js";import"./prompt-BKfKBHyN.js";import"./chunk-P3UUX2T6-OlAXa1VC.js";import"./chunk-5FUV23JF-BunLQmqw.js";import"./chunk-RKBIB2RM-cgj6pqOB.js";import"./chunk-WX2SMNCD-CYp4yo3d.js";import"./plus-mini-DfhjBeEB.js";import"./command-bar-B4tNt0in.js";import"./index-T2cn0UOM.js";import"./chunk-QAF7PVQE-D70u5tsT.js";import"./format-CJ2FegFx.js";import"./_baseIsEqual-DdDy9tKi.js";import"./date-picker-BsdoIRhX.js";import"./clsx-B-dksMZM.js";import"./popover-C1ro1ubo.js";import"./x-mark-mini-DjxzaqmQ.js";import"./triangle-left-mini-o3U9ykef.js";import"./chunk-4N7PLYUW-DRfoew5M.js";import"./chunk-DMYZ6SLX-CvGU_oYL.js";const $={widgets:[]},G={widgets:[]};var d=y(),J=()=>{const{t}=u();return v.useMemo(()=>[d.accessor("name",{header:()=>e.jsx(c,{text:t("fields.name")}),cell:({getValue:s,row:a})=>{const i=a.getToggleExpandedHandler();if(a.original.parent_category!==void 0){const r=N(a.original);return e.jsx("div",{className:"flex size-full items-center gap-1 overflow-hidden",children:r.map((n,l)=>e.jsxs("div",{className:f("overflow-hidden",{"text-ui-fg-muted flex items-center gap-x-1":l!==r.length-1}),children:[e.jsx(p,{size:"small",leading:"compact",className:"truncate",children:n.name}),l!==r.length-1&&e.jsx(p,{size:"small",leading:"compact",children:"/"})]},n.id))})}return e.jsxs("div",{className:"flex size-full items-center gap-x-3 overflow-hidden",children:[e.jsx("div",{className:"flex size-7 items-center justify-center",children:a.getCanExpand()?e.jsx(R,{type:"button",onClick:r=>{r.stopPropagation(),r.preventDefault(),i()},size:"small",variant:"transparent",className:"text-ui-fg-subtle",children:e.jsx(k,{className:f({"rotate-90 transition-transform will-change-transform":a.getIsExpanded()})})}):null}),e.jsx("span",{className:"truncate",children:s()})]})}}),d.accessor("handle",{header:()=>e.jsx(c,{text:t("fields.handle")}),cell:({getValue:s})=>e.jsx(E,{text:`/${s()}`})}),d.accessor("is_active",{header:()=>e.jsx(c,{text:t("fields.status")}),cell:({getValue:s})=>{const{color:a,label:i}=w(s(),t);return e.jsx(g,{color:a,children:i})}}),d.accessor("is_internal",{header:()=>e.jsx(c,{text:t("categories.fields.visibility.label")}),cell:({getValue:s})=>{const{color:a,label:i}=P(s(),t);return e.jsx(g,{color:a,children:i})}})],[t])},Z=({pageSize:t=20,prefix:s})=>{const a=M(["q","offset","order"],s),i={q:a.q,limit:t,offset:a.offset?Number(a.offset):0,order:a.order};return{raw:a,searchParams:i}},m=20,F=()=>{const{t}=u(),{raw:s,searchParams:a}=Z({pageSize:m}),i=s.q?{include_ancestors_tree:!0,fields:"id,name,handle,is_active,is_internal,parent_category",...a}:{include_descendants_tree:!0,parent_category_id:"null",fields:"id,name,category_children,handle,is_internal,is_active",...a},{product_categories:r,count:n,isLoading:l,isError:b,error:C}=B({...i},{placeholderData:q}),x=V(),{table:_}=D({data:r||[],columns:x,count:n,getRowId:o=>o.id,getSubRows:o=>o.category_children,enableExpandableRows:!0,pageSize:m}),T=!!r&&r.length>0;if(b)throw C;return e.jsxs(A,{className:"divide-y p-0",children:[e.jsxs("div",{className:"flex items-center justify-between px-6 py-4",children:[e.jsxs("div",{children:[e.jsx(I,{children:t("categories.domain")}),e.jsx(p,{className:"text-ui-fg-subtle",size:"small",children:t("categories.subtitle")})]}),e.jsxs("div",{className:"flex items-center gap-x-2",children:[T&&e.jsx(j,{size:"small",variant:"secondary",asChild:!0,children:e.jsx(h,{to:"organize",children:t("categories.organize.action")})}),e.jsx(j,{size:"small",variant:"secondary",asChild:!0,children:e.jsx(h,{to:"create",children:t("actions.create")})})]})]}),e.jsx(H,{table:_,columns:x,count:n,pageSize:m,isLoading:l,navigateTo:o=>o.id,queryObject:s,search:!0,pagination:!0})]})},K=({category:t})=>{const{t:s}=u(),a=z(t);return e.jsx(L,{groups:[{actions:[{label:s("actions.edit"),icon:e.jsx(O,{}),to:`${t.id}/edit`}]},{actions:[{label:s("actions.delete"),icon:e.jsx(Q,{}),onClick:a}]}]})},U=y(),V=()=>{const t=J();return v.useMemo(()=>[...t,U.display({id:"actions",cell:({row:s})=>e.jsx(K,{category:s.original})})],[t])},He=()=>e.jsxs("div",{className:"flex flex-col gap-y-2",children:[G.widgets.map((t,s)=>e.jsx("div",{children:e.jsx(t.Component,{})},s)),e.jsx(F,{}),$.widgets.map((t,s)=>e.jsx("div",{children:e.jsx(t.Component,{})},s)),e.jsx(S,{})]});export{He as Component};
