import{C as f}from"./chunk-IWBW3RD4-e8c8ZIRc.js";import{R as n}from"./chunk-RLLZZQKN-CuYY48Je.js";import"./chunk-C7RYT3S3-DvWl1ixb.js";import{u as _,c as i}from"./chunk-2FB644HY-BHty38NP.js";import{j as r,Q as x,S as h,s as j,q as s,t as v}from"./index-DQ7iaOIo.js";import"./_baseIsEqual-DdDy9tKi.js";import"./index-LtR7LJbL.js";import"./folder-illustration-8yBiBsTN.js";import"./dots-six-BVceUXpb.js";import"./prompt-BKfKBHyN.js";import"./label-DsyTUQgE.js";import"./chunk-4N7PLYUW-DRfoew5M.js";import"./chunk-DMYZ6SLX-CvGU_oYL.js";var o={fields:"id,name,parent_category_id,rank,*category_children",parent_category_id:"null",include_descendants_tree:!0,limit:9999},C=()=>{const{product_categories:l,isPending:u,isError:d,error:c}=_(o),{mutateAsync:m,isPending:y}=x({mutationFn:async({value:e})=>{await j.admin.productCategory.update(e.id,{rank:e.rank??0,parent_category_id:e.parent_category_id})},onMutate:async e=>{await s.cancelQueries({queryKey:i.list(o)});const t=s.getQueryData(i.list(o)),a={...t,product_categories:e.arr};return s.setQueryData(i.list(o),a),{previousValue:t}},onError:(e,t,a)=>{s.setQueryData(i.list(o),a==null?void 0:a.previousValue),v.error(e.message)},onSettled:async(e,t,a)=>{await s.invalidateQueries({queryKey:i.lists()}),await s.invalidateQueries({queryKey:i.detail(a.value.id)})}}),p=async(e,t)=>{await m({value:e,arr:t})},g=u||y;if(d)throw c;return r.jsxs("div",{className:"flex h-full flex-col overflow-hidden",children:[r.jsx(n.Header,{children:r.jsx("div",{className:"flex items-center justify-end",children:g&&r.jsx(h,{className:"animate-spin"})})}),r.jsx(n.Body,{className:"bg-ui-bg-subtle flex flex-1 flex-col overflow-y-auto",children:r.jsx(f,{value:l||[],onChange:p})})]})},P=()=>r.jsx(n,{children:r.jsx(C,{})});export{P as Component};
