import{a as f}from"./chunk-B4FQDBC3-vSBK5DkU.js";import{N as C,a as b,D as T,b as y}from"./chunk-GA34GXNI-eX0QGNOV.js";import{T as d,a as _}from"./chunk-IQRVIEMV-CAyGAynz.js";import{u as x,r as j,j as a,O as w,c6 as D,k as P,C as N,H as S,L as H,cg as E,A as O,t as g}from"./index-DQ7iaOIo.js";import{c as v}from"./index-DW7vLJga.js";import{u as q}from"./chunk-C76H5USB-BzcnRuay.js";import{u as A,D as L}from"./chunk-MOFW5DA3-BBRzwwAr.js";import"./lodash-BbEdBw2P.js";import"./chunk-7LAPOKHJ-CJKFdgcT.js";import"./chunk-M566SHKI-CpCecA-q.js";import{P as k}from"./pencil-square-C2dQ88SM.js";import{T as z}from"./trash-AHlgA58B.js";import{u as B}from"./use-prompt-DSUtE_64.js";import{B as I}from"./label-DsyTUQgE.js";import"./chunk-P3UUX2T6-OlAXa1VC.js";import"./format-CJ2FegFx.js";import"./chunk-5FUV23JF-BunLQmqw.js";import"./chunk-RKBIB2RM-cgj6pqOB.js";import"./chunk-WX2SMNCD-CYp4yo3d.js";import"./plus-mini-DfhjBeEB.js";import"./command-bar-B4tNt0in.js";import"./index-T2cn0UOM.js";import"./chunk-QAF7PVQE-D70u5tsT.js";import"./_baseIsEqual-DdDy9tKi.js";import"./date-picker-BsdoIRhX.js";import"./clsx-B-dksMZM.js";import"./popover-C1ro1ubo.js";import"./x-mark-mini-DjxzaqmQ.js";import"./triangle-left-mini-o3U9ykef.js";import"./prompt-BKfKBHyN.js";var M=({prefix:t,pageSize:e=20})=>{const r=q(["offset","q","order","created_at","updated_at"],t),{offset:s,q:i,order:c,created_at:o,updated_at:m}=r;return{searchParams:{limit:e,offset:s?Number(s):0,order:c,created_at:o?JSON.parse(o):void 0,updated_at:m?JSON.parse(m):void 0,q:i},raw:r}},n=v(),J=()=>{const{t}=x();return j.useMemo(()=>[n.accessor("name",{header:()=>a.jsx(C,{}),cell:({getValue:e})=>a.jsx(b,{name:e()})}),n.accessor("description",{header:()=>a.jsx(T,{}),cell:({getValue:e})=>a.jsx(y,{description:e()})}),n.accessor("campaign_identifier",{header:()=>a.jsx(d,{text:t("campaigns.fields.identifier")}),cell:({getValue:e})=>{const r=e();return a.jsx(_,{text:r})}}),n.accessor("starts_at",{header:()=>a.jsx(d,{text:t("campaigns.fields.start_date")}),cell:({getValue:e})=>{const r=e();if(!r)return;const s=new Date(r);return a.jsx(f,{date:s})}}),n.accessor("ends_at",{header:()=>a.jsx(d,{text:t("campaigns.fields.end_date")}),cell:({getValue:e})=>{const r=e();if(!r)return;const s=new Date(r);return a.jsx(f,{date:s})}})],[t])};const Q={widgets:[]},R={widgets:[]};var u=20,$=()=>{const{t}=x(),{raw:e,searchParams:r}=M({pageSize:u}),{campaigns:s,count:i,isPending:c,isError:o,error:m}=D(r,{placeholderData:P}),l=Y(),{table:h}=A({data:s??[],columns:l,count:i,enablePagination:!0,getRowId:p=>p.id,pageSize:u});if(o)throw m;return a.jsxs(N,{className:"divide-y p-0",children:[a.jsxs("div",{className:"flex items-center justify-between px-6 py-4",children:[a.jsx(S,{level:"h2",children:t("campaigns.domain")}),a.jsx(H,{to:"/campaigns/create",children:a.jsx(I,{size:"small",variant:"secondary",children:t("actions.create")})})]}),a.jsx(L,{table:h,columns:l,count:i,pageSize:u,pagination:!0,search:!0,navigateTo:p=>p.id,isLoading:c,queryObject:e,orderBy:["name","created_at","updated_at"]})]})},G=({campaign:t})=>{const{t:e}=x(),r=B(),{mutateAsync:s}=E(t.id),i=async()=>{await r({title:e("general.areYouSure"),description:e("campaigns.deleteCampaignWarning",{name:t.name}),verificationInstruction:e("general.typeToConfirm"),verificationText:t.name,confirmText:e("actions.delete"),cancelText:e("actions.cancel")})&&await s(void 0,{onSuccess:()=>{g.success(e("campaigns.toast.delete"))},onError:o=>{g.error(o.message)}})};return a.jsx(O,{groups:[{actions:[{icon:a.jsx(k,{}),label:e("actions.edit"),to:`/campaigns/${t.id}/edit`}]},{actions:[{icon:a.jsx(z,{}),label:e("actions.delete"),onClick:i}]}]})},W=v(),Y=()=>{const t=J();return j.useMemo(()=>[...t,W.display({id:"actions",cell:({row:e})=>a.jsx(G,{campaign:e.original})})],[t])},_e=()=>a.jsxs("div",{className:"flex flex-col gap-y-2",children:[R.widgets.map((t,e)=>a.jsx("div",{children:a.jsx(t.Component,{})},e)),a.jsx($,{}),Q.widgets.map((t,e)=>a.jsx("div",{children:a.jsx(t.Component,{})},e)),a.jsx(w,{})]});export{_e as Component};
