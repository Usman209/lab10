import{u as v}from"./chunk-QBDU475K--UbpR47S.js";import{q as P,j as t,s as b,u as x,a as C,h as T,k as w,C as D,H as L,L as c,O as q,r as S,A as z,t as m}from"./index-DQ7iaOIo.js";import{u as E,a as k}from"./chunk-55F244YM-B_ivUNU-.js";import{u as A,D as Q}from"./chunk-MOFW5DA3-BBRzwwAr.js";import"./lodash-BbEdBw2P.js";import"./chunk-7LAPOKHJ-CJKFdgcT.js";import"./chunk-M566SHKI-CpCecA-q.js";import{p as H,u as N,a as R}from"./chunk-4N7PLYUW-DRfoew5M.js";import{P as B}from"./pencil-square-C2dQ88SM.js";import{T as K}from"./trash-AHlgA58B.js";import{u as M}from"./use-prompt-DSUtE_64.js";import{B as l}from"./label-DsyTUQgE.js";import{c as O}from"./index-DW7vLJga.js";import"./chunk-6XHB4MRO-D_LOUyOE.js";import"./chunk-PHMALPVO-BXYfPvrg.js";import"./chunk-ADOCJB6L-DwJI6LYz.js";import"./chunk-P3UUX2T6-OlAXa1VC.js";import"./chunk-C76H5USB-BzcnRuay.js";import"./chunk-NGTKJO6Q-CBxZNPj4.js";import"./chunk-OPYB3EPU-Gu9ostxc.js";import"./chunk-AYIUW4A5-32QjTsWY.js";import"./chunk-5FUV23JF-BunLQmqw.js";import"./chunk-RKBIB2RM-cgj6pqOB.js";import"./chunk-WX2SMNCD-CYp4yo3d.js";import"./plus-mini-DfhjBeEB.js";import"./command-bar-B4tNt0in.js";import"./index-T2cn0UOM.js";import"./chunk-QAF7PVQE-D70u5tsT.js";import"./format-CJ2FegFx.js";import"./_baseIsEqual-DdDy9tKi.js";import"./date-picker-BsdoIRhX.js";import"./clsx-B-dksMZM.js";import"./popover-C1ro1ubo.js";import"./x-mark-mini-DjxzaqmQ.js";import"./triangle-left-mini-o3U9ykef.js";import"./chunk-DMYZ6SLX-CvGU_oYL.js";import"./prompt-BKfKBHyN.js";const _={widgets:[]},$={widgets:[]};var F=()=>({queryKey:H.list({limit:20,offset:0}),queryFn:async()=>b.admin.product.list({limit:20,offset:0})}),kt=e=>async()=>{const s=F();return P.getQueryData(s.queryKey)??await e.fetchQuery(s)},u=20,I=()=>{const{t:e}=x(),s=C(),r=T(),{searchParams:a,raw:i}=E({pageSize:u}),{products:d,count:o,isLoading:h,isError:y,error:f}=N({...a},{initialData:r,placeholderData:w}),j=k(),p=Y(),{table:g}=A({data:d??[],columns:p,count:o,enablePagination:!0,pageSize:u,getRowId:n=>n.id});if(y)throw f;return t.jsxs(D,{className:"divide-y p-0",children:[t.jsxs("div",{className:"flex items-center justify-between px-6 py-4",children:[t.jsx(L,{level:"h2",children:e("products.domain")}),t.jsxs("div",{className:"flex items-center justify-center gap-x-2",children:[t.jsx(l,{size:"small",variant:"secondary",asChild:!0,children:t.jsx(c,{to:`export${s.search}`,children:e("actions.export")})}),t.jsx(l,{size:"small",variant:"secondary",asChild:!0,children:t.jsx(c,{to:"import",children:e("actions.import")})}),t.jsx(l,{size:"small",variant:"secondary",asChild:!0,children:t.jsx(c,{to:"create",children:e("actions.create")})})]})]}),t.jsx(Q,{table:g,columns:p,count:o,pageSize:u,filters:j,search:!0,pagination:!0,isLoading:h,queryObject:i,navigateTo:n=>`${n.original.id}`,orderBy:["title","created_at","updated_at"],noRecords:{message:e("products.list.noRecordsMessage")}}),t.jsx(q,{})]})},G=({product:e})=>{const{t:s}=x(),r=M(),{mutateAsync:a}=R(e.id),i=async()=>{await r({title:s("general.areYouSure"),description:s("products.deleteWarning",{title:e.title}),confirmText:s("actions.delete"),cancelText:s("actions.cancel")})&&await a(void 0,{onSuccess:()=>{m.success(s("products.toasts.delete.success.header"),{description:s("products.toasts.delete.success.description",{title:e.title})})},onError:o=>{m.error(s("products.toasts.delete.error.header"),{description:o.message})}})};return t.jsx(z,{groups:[{actions:[{icon:t.jsx(B,{}),label:s("actions.edit"),to:`/products/${e.id}/edit`}]},{actions:[{icon:t.jsx(K,{}),label:s("actions.delete"),onClick:i}]}]})},W=O(),Y=()=>{const e=v();return S.useMemo(()=>[...e,W.display({id:"actions",cell:({row:r})=>t.jsx(G,{product:r.original})})],[e])},At=()=>t.jsxs("div",{className:"flex flex-col gap-y-2",children:[$.widgets.map((e,s)=>t.jsx("div",{children:t.jsx(e.Component,{})},s)),t.jsx(I,{}),_.widgets.map((e,s)=>t.jsx("div",{children:t.jsx(e.Component,{})},s))]});export{At as Component,kt as productLoader};
