import{a as g,u as S,b as B,c as H,d as O}from"./chunk-FUHEDN6F-DJm8RBCj.js";import{c as G}from"./chunk-MWVM4TYO-bKUcYSnf.js";import{r as m,j as n,u as D,y as L,g as y}from"./index-DQ7iaOIo.js";import{f as I,C as P}from"./index.esm-C23H4hs_.js";import{C as U}from"./chunk-C7RYT3S3-DvWl1ixb.js";var $=Object.defineProperty,p=Object.getOwnPropertySymbols,w=Object.prototype.hasOwnProperty,T=Object.prototype.propertyIsEnumerable,C=(e,a,t)=>a in e?$(e,a,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[a]=t,W=(e,a)=>{for(var t in a||(a={}))w.call(a,t)&&C(e,t,a[t]);if(p)for(var t of p(a))T.call(a,t)&&C(e,t,a[t]);return e},q=(e,a)=>{var t={};for(var l in e)w.call(e,l)&&a.indexOf(l)<0&&(t[l]=e[l]);if(e!=null&&p)for(var l of p(e))a.indexOf(l)<0&&T.call(e,l)&&(t[l]=e[l]);return t};const V=m.forwardRef((e,a)=>{var t=e,{color:l="currentColor"}=t,c=q(t,["color"]);return m.createElement("svg",W({xmlns:"http://www.w3.org/2000/svg",width:15,height:15,fill:"none",ref:a},c),m.createElement("g",{clipPath:"url(#a)"},m.createElement("path",{fill:l,d:"M1 5.694H.25c0 .415.336.75.75.75zm13 0v.75a.75.75 0 0 0 .75-.75zm0-1.444h.75a.75.75 0 0 0-.445-.685zM7.5 1.361l.305-.685a.75.75 0 0 0-.61 0zM1 4.25l-.305-.685a.75.75 0 0 0-.445.685zm5.056 10.139a.75.75 0 0 0 0-1.5zM1 13.639l-.72-.21a.75.75 0 0 0 .72.96zm.632-2.167v-.75a.75.75 0 0 0-.72.54zm4.424.75a.75.75 0 0 0 0-1.5zm8.158-2.792a.75.75 0 1 0-1.06-1.061zM8.73 12.793a.75.75 0 1 0 1.06 1.06zM1 6.444h13v-1.5H1zm13.75-.75V4.25h-1.5v1.444zm-.445-2.13L7.805.677l-.61 1.37 6.5 2.89zM7.195.677l-6.5 2.889.61 1.37 6.5-2.889zM.25 4.25v1.444h1.5V4.25zm5.806 8.639H1v1.5h5.056zm-4.336.96.632-2.167-1.44-.42L.28 13.43zm-.088-1.627h4.424v-1.5H1.632zm.062-6.528v5.778h1.5V5.694zm4.39 5.778V5.694h-1.5v5.778zm7.07-3.103L8.73 12.793l1.06 1.06 4.424-4.423zm-3.876.756c0-.115.093-.208.208-.208v1.5c.713 0 1.292-.579 1.292-1.292zm.208-.208c.115 0 .208.093.208.208h-1.5c0 .713.579 1.292 1.292 1.292zm.208.208a.21.21 0 0 1-.208.208v-1.5c-.713 0-1.292.579-1.292 1.292zm-.208.208a.21.21 0 0 1-.208-.208h1.5c0-.713-.578-1.292-1.292-1.292zm3.764 3.764c0-.115.093-.208.208-.208v1.5c.714 0 1.292-.578 1.292-1.292zm.208-.208c.115 0 .209.093.209.208h-1.5c0 .714.578 1.292 1.291 1.292zm.209.208a.21.21 0 0 1-.209.209v-1.5c-.713 0-1.291.578-1.291 1.291zm-.209.209a.21.21 0 0 1-.208-.209h1.5c0-.713-.578-1.291-1.292-1.291z"})),m.createElement("defs",null,m.createElement("clipPath",{id:"a"},m.createElement("path",{fill:"#fff",d:"M0 0h15v15H0z"}))))});V.displayName="BuildingTax";var j=({includesTax:e})=>{const{t:a}=D();return n.jsx(L,{maxWidth:999,content:a(e?"general.includesTaxTooltip":"general.excludesTaxTooltip"),children:n.jsx(V,{className:y({"text-ui-fg-muted":!e})})})},b=({field:e,context:a,code:t})=>{const{control:l,renderProps:c}=S({field:e,context:a,type:"number"}),{container:u,input:d}=c,r=G[t.toUpperCase()];return n.jsx(U,{control:l,name:e,render:({field:o})=>n.jsx(B,{...u,children:n.jsx(A,{field:o,inputProps:d,currencyInfo:r})})})},A=({field:e,inputProps:a,currencyInfo:t})=>{const{value:l,onChange:c,onBlur:u,ref:d,...r}=e,{ref:o,onBlur:i,onFocus:h,onChange:f,...E}=a,x=m.useCallback(s=>{const _=typeof s=="number"?s.toString():s||"";return I({value:_,decimalScale:t.decimal_digits,disableGroupSeparators:!0,decimalSeparator:"."})},[t]),[z,v]=m.useState(l||""),N=(s,_,F)=>{if(!s){v("");return}v(s)};m.useEffect(()=>{let s=l;isNaN(Number(l))||(s=x(s)),v(s)},[l,x]);const M=O(o,d);return n.jsxs("div",{className:"relative flex size-full items-center",children:[n.jsx("span",{className:"txt-compact-small text-ui-fg-muted pointer-events-none absolute left-4 w-fit min-w-4","aria-hidden":!0,children:t.symbol_native}),n.jsx(P,{...r,...E,ref:M,className:"txt-compact-small w-full flex-1 cursor-default appearance-none bg-transparent py-2.5 pl-12 pr-4 text-right outline-none",value:z||void 0,onValueChange:N,formatValueOnBlur:!0,onBlur:()=>{u(),i(),f(z,l)},onFocus:h,decimalScale:t.decimal_digits,decimalsLimit:t.decimal_digits,autoComplete:"off",tabIndex:-1})]})},Z=({currencies:e,regions:a,pricePreferences:t,isReadyOnly:l,getFieldName:c,t:u})=>{const d=H();return[...(e==null?void 0:e.map(r=>{const o=t==null?void 0:t.find(i=>i.attribute==="currency_code"&&i.value===r);return d.column({id:`currency_prices.${r}`,name:u("fields.priceTemplate",{regionOrCurrency:r.toUpperCase()}),header:()=>n.jsxs("div",{className:"flex w-full items-center justify-between gap-3",children:[u("fields.priceTemplate",{regionOrCurrency:r.toUpperCase()}),n.jsx(j,{includesTax:o==null?void 0:o.is_tax_inclusive})]}),cell:i=>l!=null&&l(i)?n.jsx(g,{}):n.jsx(b,{code:r,context:i,field:c(i,r)}),type:"string"})}))??[],...(a==null?void 0:a.map(r=>{const o=t==null?void 0:t.find(i=>i.attribute==="region_id"&&i.value===r.id);return d.column({id:`region_prices.${r.id}`,name:u("fields.priceTemplate",{regionOrCurrency:r.name}),header:()=>n.jsxs("div",{className:"flex w-full items-center justify-between gap-3",children:[u("fields.priceTemplate",{regionOrCurrency:r.name}),n.jsx(j,{includesTax:o==null?void 0:o.is_tax_inclusive})]}),cell:i=>l!=null&&l(i)?n.jsx(g,{}):(e==null?void 0:e.find(f=>f===r.currency_code))?n.jsx(b,{code:r.currency_code,context:i,field:c(i,r.id)}):null,type:"string"})}))??[]]};export{Z as g};
